"use strict";define(function(e,t,n){function s(e,t,n){var s=null,o=1e3,a=[];switch(!0){case arguments.length<1:throw new Error("msg方法参数至少需要一个输出内容参数！");case 1==arguments.length:if("string"!=typeof e)throw new TypeError("msg方法参数类型不正确！参数必须为字符串类型");s=e;break;case 2==arguments.length:if("string"==typeof e&&"number"==typeof t)s=e,o=t;else{if("string"!=typeof e||"[object Array]"!={}.toString.call(t))throw new TypeError("msg方法参数类型不正确！第一个应为字符串，第二个如果设置时间应为数字，偏移量则为数组");s=e,a=t}break;case 3==arguments.length:if("string"!=typeof e||"number"!=typeof t||"[object Array]"!={}.toString.call(n))throw new TypeError("msg方法参数类型不正确！第一个应为字符串，第二个应为数字,第三个应为数组！");s=e,o=t,a=n}var l=document.createElement("div"),i="popedMsg"+(new Date).getTime();l.id=i,l.className=m.TIPS_OUT_CLASS,h.push(i);var d=document.createElement("div"),r=document.createTextNode(s);if(d.className=m.TIPS_IN_CLASS,d.appendChild(r),l.appendChild(d),a.length?1==a.length?(l.style.top=isNaN(a[0])?a[0]:a[0]+"px",l.style.left="38%"):(l.style.top=isNaN(a[0])?a[0]:a[0]+"px",l.style.left=isNaN(a[1])?a[1]:a[1]+"px"):(l.style.top="45vh",l.style.left="37vw"),0!=o){var p=setTimeout(function(){c(i),N.splice(N.indexOf(p),1)},o);N.push(p)}return document.body.appendChild(l),h.length>1&&(clearTimeout(N[0]),N.splice(N.indexOf(N[0]),1),c(h[0])),i}function o(e){var t={title:e.title||"弹出层",url:e.url||"",content:e.content||"",icon:e.icon||0,space:e.space||[],style:e.style,closeBtn:e.closeBtn,btns:e.btns||0,btnsRML:e.btnsRML,outClose:e.outClose,btnsFn:e.btnsFn,closeFn:e.closeFn||function(){}},n=null;switch(!0){case""!=t.content:n=y.content(t);break;case""!=t.url:n=y.iframe(t);break;default:throw new Error("easyUtil_Poped:没有找到可以打开的页面！")}return n}function a(e){return o({title:e.title||"弹出层",url:e.url||"",space:e.space||[],style:e.style||1,closeBtn:0==e.closeBtn?0:e.closeBtn||1,outClose:e.outClose||!0,closeFn:e.closeFn})}function l(e){return o({title:e.title,content:e.content||"提示内容",space:["20em","13em"],style:e.style,icon:0==e.icon?0:e.icon||2,closeBtn:0==e.closeBtn?0:e.closeBtn||1,btns:[e.btn||"确定"],btnsRML:e.btnsRML||"r",outClose:e.outClose||!1,btnsFn:[e.btnFn||function(){}]})}function i(e){return o({title:e.title,content:e.content||"提示内容",space:["20em","13em"],style:e.style,icon:0==e.icon?0:e.icon||4,closeBtn:0==e.closeBtn?0:e.closeBtn||1,btns:[e.btn1||"确定",e.btn2||"取消"],btnsRML:e.btnsRML||"r",outClose:e.outClose||!1,btnsFn:[e.btn1Fn||function(){},e.btn2Fn||function(){}]})}function c(e){try{document.body.removeChild(document.querySelector("#"+e)),e.indexOf("Msg")>0?h.splice(h.indexOf(e),1):b.splice(b.indexOf(e),1)}catch(e){console.log("当前弹出层已关闭")}}function d(){for(var e=document.body,t=b.length;t--;)e.removeChild(document.querySelector("#"+b[t]));for(var n=h.length;n--;)e.removeChild(document.querySelector("#"+h[n]));f.disable(),h=[],b=[]}function r(e){return document.createElement(e)}function p(e){return document.createTextNode(e)}function u(e,t){var n=e.offsetWidth,s=e.offsetHeight,o=t.offsetWidth,a=t.offsetHeight;t.style.top=(s-a)/2+"px",t.style.left=(n-o)/2+"px"}var m={CLOSEID:"easyUtilPopedCloseBtn",IFRAMEID:"easyUtilPopedIframe",TITLEID:"easyUtilPopedTitle",TIPS_OUT_CLASS:"easyUtil-poped-Tips-out",TIPS_IN_CLASS:"easyUtil-poped-Tips-in",SHADE:"easyUtil-poped-ShadeBody",OUT:"easyUtil-poped-out",OUT_2:"easyUtil-poped-out2",ICON:"easyUtil-poped-icon",CLOSE_1:"easyUtil-poped-close1",CLOSE_2:"easyUtil-poped-close2",WARNNING:"easyUtil-poped-warnning",RIGHT:"easyUtil-poped-right",WRONG:"easyUtil-poped-wrong",REQUIRE:"easyUtil-poped-require",BTNLEFT:"easyUtil-poped-btns-left",BTNMIDDLE:"easyUtil-poped-btns-middle",TITLE:"easyUtil-poped-title",TITLE_2:"easyUtil-poped-title2",CONTENT:"easyUtil-poped-content",CONTENT_2:"easyUtil-poped-content2",IFRAME:"easyUtil-poped-iframe",IFRAME_2:"easyUtil-poped-iframe2",BTNS:"easyUtil-poped-btns",BTNS_2:"easyUtil-poped-btns2",BTN1:"easyUtil-poped-btns-btn1",BTN1_2:"easyUtil-poped-btns-btn1-2",BTN2:"easyUtil-poped-btns-btn2",BTN2_2:"easyUtil-poped-btns-btn2-2"},h=[],b=[],N=[],f=function(){function e(e){e=v.getEvent(e);var o=v.getEventTarget(e);switch(e.type){case"mousedown":t=document.querySelector("."+m.OUT),t.contains(o)&&o.id==m.TITLEID?(n=e.clientX-t.offsetLeft,s=e.clientY-t.offsetTop):t=null;break;case"mousemove":null!==t&&(t.style.left=e.clientX-n+"px",t.style.top=e.clientY-s+"px");break;case"mouseup":t=null}}var t=null,n=0,s=0;return{enable:function(){v.initEvent(document,"mousedown",e),v.initEvent(document,"mousemove",e),v.initEvent(document,"mouseup",e)},disable:function(){v.removeEvent(document,"mousedown",e),v.removeEvent(document,"mousemove",e),v.removeEvent(document,"mouseup",e)}}}(),y={basic:function(e){var t="poped"+(new Date).getTime(),n=r("div"),s=r("div"),o=r("div"),a=e.space,l=r("div"),i=p(e.title);switch(b.push(t),T.option=e,n.id=t,n.className=m.SHADE,s.className=m.OUT,o.className=m.TITLE,o.id=m.TITLEID,l.id=m.CLOSEID,!0){case 1==e.closeBtn:l.className=m.ICON+" "+m.CLOSE_1;break;case 2==e.closeBtn:l.className=m.ICON+" "+m.CLOSE_2}return a.length&&(1==a.length?s.style.width=isNaN(a[0])?a[0]:a[0]+"px":(s.style.width=isNaN(a[0])?a[0]:a[0]+"px",s.style.height=isNaN(a[1])?a[1]:a[1]+"px")),2==e.style&&(s.className+=" "+m.OUT_2,o.className+=" "+m.TITLE_2),o.appendChild(i),o.appendChild(l),s.appendChild(o),e.outClose?v.initEvent(n,"click",T.shadeClose):v.initEvent(n,"click",T.btnClose),f.enable(),T.shade=n,{title:o,out:s,shade:n}},iframe:function(e){var t=y.basic(e),n=t.out,s=t.shade.id,o=r("iframe");return o.id=m.IFRAMEID,o.className=m.IFRAME,2==e.style&&(o.className+=" "+m.IFRAME_2),o.src=e.url,n.appendChild(o),t.shade.appendChild(n),document.body.appendChild(t.shade),u(t.shade,n),b.length>1&&c(b[0]),s},content:function(e){var t=y.basic(e),n=r("div"),s=p(e.content),o=r("div"),a=null,l=null,i=t.out,d=t.shade.id,h=r("div");switch(n.id="easyUtilPopedContent",n.className=m.CONTENT,o.id="easyUtilPopedbtns",o.className=m.BTNS,!0){case 2==e.icon:h.className=m.ICON+" "+m.RIGHT;break;case 4==e.icon:h.className=m.ICON+" "+m.REQUIRE;break;case 3==e.icon:h.className=m.ICON+" "+m.WRONG;break;case 1==e.icon:h.className=m.ICON+" "+m.WARNNING}switch(!0){case"r"==e.btnsRML:break;case"l"==e.btnsRML:o.className+=" "+m.BTNLEFT;break;case"m"==e.btnsRML:o.className+=" "+m.BTNMIDDLE}switch(!0){case 1==e.btns.length:a=r("button"),a.className=m.BTN1,a.innerHTML=e.btns[0];break;case 2==e.btns.length:a=r("button"),a.className=m.BTN1,a.innerHTML=e.btns[0],l=r("button"),l.className=m.BTN2,l.innerHTML=e.btns[1]}return 2==e.style&&(n.className+=" "+m.CONTENT_2,o.className+=" "+m.BTNS_2,a&&(a.className+=" "+m.BTN1_2),l&&(l.className+=" "+m.BTN2_2)),a&&o.appendChild(a),l&&o.appendChild(l),n.appendChild(h),n.appendChild(s),i.appendChild(n),i.appendChild(o),t.shade.appendChild(i),document.body.appendChild(t.shade),u(t.shade,i),b.length>1&&c(b[0]),d}},T={option:null,shade:null,target:function(e){return v.stopPropagation(e),e=v.getEvent(e),v.getEventTarget(e)},closeShade:function(e){T.option.closeFn(),T.option.outClose?v.removeEvent(T.shade,"click",T.shadeClose):v.removeEvent(T.shade,"click",T.btnClose),f.disable(),c(T.shade.id),T.option=null,T.shade=null},btnEvent:function(e){switch(!0){case e.className.indexOf(m.BTN1)>-1:T.option.btnsFn[0](),T.closeShade(e);break;case e.className.indexOf(m.BTN2)>-1:T.option.btnsFn[1](),T.closeShade(e)}},shadeClose:function(e){var t=T.target(e);switch(!0){case t.id==m.CLOSEID:T.closeShade(t);break;case"button"==t.tagName.toLowerCase():T.btnEvent(t);break;case t.id==T.shade.id:T.closeShade(t)}},btnClose:function(e){var t=T.target(e);switch(!0){case t.id==m.CLOSEID:T.closeShade(t);break;case"button"==t.tagName.toLowerCase():T.btnEvent(t)}}},v={initEvent:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},getEvent:function(e){return e||window.event},getEventTarget:function(e){return e.target||e.srcElement},getCharCode:function(e){return"number"==typeof e.charCode?e.charCode:e.keyCode},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},removeEvent:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}};n.exports={msg:s,open:a,alert:l,confirm:i,closeMsg:c,close:d}});